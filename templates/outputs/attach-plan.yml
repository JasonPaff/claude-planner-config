# Attach implementation plan to work item
# Used by plan workflow

parameters:
  - name: workItemId
    type: string

steps:
  - script: |
      chmod +x $(configRepoPath)/scripts/attach-plan.sh
      $(configRepoPath)/scripts/attach-plan.sh \
        "${{ parameters.workItemId }}" \
        "$(Agent.TempDirectory)/implementation-plan.md" \
        "$(System.AccessToken)"
    displayName: 'Attach plan to work item'
    env:
      AZURE_DEVOPS_ORG: $(azureDevOpsOrg)
      AZURE_DEVOPS_PROJECT: $(azureDevOpsProject)
